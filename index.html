<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial_scale=1">
        <link rel="stylesheet" href="home_styles.css">
        <title>AFib Detection App</title>
    </head>
    <body>
        <div class="container">
            <div class="header">
                <div class="left-side">
                    <div class="dropdownMenu">
                        <button onclick="myFunction()" class="dropbtn">...</button>
                        <div id="myDropdown" class="dropdown-content">
                          <a href="index.html" target='_blank'>Home</a>
                          <a href="about.html" target='_blank'>About</a>
                          <a href="documentation.html" target='_blank'>Documentation</a>
                        </div>
                    </div>
                    <script src="dropdown_menu.js"></script>
                </div>

                <div class="right-side">
                    <div class="websiteName">
                        <h1>AFib Detection App</h1>
                    </div>
                </div>
            </div>
            <div class="content-wrapper">
                <div class="video-processor">
                    <button id="toggle-camera"><></button>
                    <video id="input-video" autoplay playsinline></video>
                    <canvas id="output-canvas"></canvas>
                    <script>
                        function putImage(){
                            canvas_height_multiplier = 0.5;
                            const w = cameraCanvas.clientWidth;
                            const h = canvas_height_multiplier * cameraCanvas.clientHeight;
                            context.drawImage(video,0,0,w,h);
                            let frame = context.getImageData(0, 0, w, h);
                            context.putImageData(frame, 0, 0);
                        }
                        var video = document.getElementById('input-video');
                        var cameraCanvas = document.getElementById('output-canvas');
                        var context = cameraCanvas.getContext("2d");
                        cameraCanvas.width = window.innerWidth;
                        cameraCanvas.height = window.innerHeight;
                        window.addEventListener('load', () =>{
                            navigator.mediaDevices
                            .getUserMedia({video: {facingMode: 'user', frameRate: 30}, audio: false})
                            .then((stream) =>{
                                video.srcObject = stream;
                                video.captureStream = video.captureStream || video.mozCaptureStream;
                                putImage();
                            })
                        })
                        setInterval(putImage, 30);
                    </script>
                </div>
                <div class="portfolio-wrapper">
                    <div class="portfolio-item-wrapper">
                        <div class="portfolio-img-bg" style="background-image:url(phone-camera.jpg)"></div>
                        <div class="text-img-wrapper">
                            <div class="logo-wrapper">
                                <img src="camera-logo.png" alt="">
                            </div>
                        </div>
                    </div>
                    <div class="portfolio-item-wrapper">
                        <div class="portfolio-img-bg" style="background-image:url(matlab-bg.png)"></div>
                        <div class="text-img-wrapper">
                            <div class="logo-wrapper">
                                <img src="ecg-signal.png" alt="">
                            </div>
                        </div>
                    </div>
                </div>
                <script src="content_navigation.js"></script>
            </div>
        </div>
    </body>
</html>